<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="tr"
      th:replace="~{admin/_layout :: layout(~{::section}, ~{::title})}">
<head>
  <title>Üniversite Yönetimi</title>
</head>
<body>
<section>
  <h2 class="h4 mb-3">Üniversiteler</h2>

  <!-- Ekleme Formu -->
  <form th:if="${form.id} == null or ${form.id} == 0"
        th:object="${form}" method="post"
        th:action="@{/ui/universities}"
        class="mb-3">

    <input th:if="${_csrf != null}" type="hidden"
           th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

    <div class="row g-2">
      <div class="col">
        <input type="text" th:field="*{name}" placeholder="Üniversite Adı" class="form-control" required>
      </div>
      <div class="col">
        <input type="text" th:field="*{website}" placeholder="Website" class="form-control">
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-success">Ekle</button>
      </div>
    </div>
  </form>

  <!-- Düzenleme formu -->
  <form th:if="${form.id} != null and ${form.id} != 0"
        th:object="${form}" method="post"
        th:action="@{/ui/universities/{id}/edit(id=${form.id})}"
        class="mb-3">

    <input type="hidden" th:field="*{id}"/>
    <input th:if="${_csrf != null}" type="hidden"
           th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

    <div class="row g-2">
      <div class="col">
        <input type="text" th:field="*{name}" placeholder="Üniversite Adı" class="form-control" required>
      </div>
      <div class="col">
        <input type="text" th:field="*{website}" placeholder="Website" class="form-control">
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-primary">Güncelle</button>
        <a href="/ui/universities" class="btn btn-secondary ms-2">Yeni</a>
      </div>
    </div>
  </form>

  <!-- Üniversite Listesi -->
  <table class="table table-bordered">
    <thead>
    <tr>
      <th>ID</th>
      <th>Ad</th>
      <th>Website</th>
      <th>İşlemler</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="u : ${universities}">
      <td th:text="${u.id}">1</td>
      <td th:text="${u.name}">Ad</td>
      <td th:text="${u.website}">site</td>
      <td>
        <a th:href="@{/ui/universities/{id}/edit(id=${u.id})}" class="btn btn-sm btn-primary">Düzenle</a>

        <!-- Silme işlemi -->
        <form th:action="@{/ui/universities/{id}/delete(id=${u.id})}" method="post" style="display:inline;">
          <input th:if="${_csrf != null}" type="hidden"
                 th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <button type="submit" class="btn btn-sm btn-danger"
                  onclick="return confirm('Silinsin mi?')">Sil</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>
</section>
</body>
</html>
